package com.yaowang.lansha.service.impl;import java.util.ArrayList;import java.util.Date;import java.util.List;import java.util.Map;import javax.annotation.Resource;import org.apache.commons.lang.StringUtils;import org.springframework.stereotype.Service;import com.yaowang.common.dao.PageDto;import com.yaowang.lansha.dao.LanshaLiveHistoryDao;import com.yaowang.lansha.entity.LanshaLiveHistory;import com.yaowang.lansha.entity.YwUserRoom;import com.yaowang.lansha.service.LanshaLiveHistoryService;import com.yaowang.lansha.service.YwUserRoomService;/** * 礼物  * @author  *  */@Service("lanshaLiveHistoryService")public class LanshaLiveHistoryServiceImpl implements LanshaLiveHistoryService{	@Resource	private LanshaLiveHistoryDao lanshaLiveHistoryDao;	@Resource	private YwUserRoomService ywUserRoomService;		@Override	public LanshaLiveHistory save(LanshaLiveHistory entity){		return lanshaLiveHistoryDao.save(entity);	}		@Override	public Integer delete(String[] ids){		return lanshaLiveHistoryDao.delete(ids);	}		@Override	public Integer update(LanshaLiveHistory entity){		return lanshaLiveHistoryDao.update(entity);	}		@Override	public LanshaLiveHistory getLanshaLiveHistoryById(String id){		return lanshaLiveHistoryDao.getLanshaLiveHistoryById(id);	}		@Override	public Map<String, LanshaLiveHistory> getLanshaLiveHistoryMapByIds(String[] ids){		return lanshaLiveHistoryDao.getLanshaLiveHistoryMapByIds(ids);	}		@Override	public List<LanshaLiveHistory> getLanshaLiveHistoryList(LanshaLiveHistory entity){		return lanshaLiveHistoryDao.getLanshaLiveHistoryList(entity);	}		@Override	public List<LanshaLiveHistory> getLanshaLiveHistoryPage(LanshaLiveHistory entity, Date startTime, Date endTime, PageDto page){		if(entity != null){			if(StringUtils.isNotBlank(entity.getRoomId())){				if(entity.getRoomId().matches("\\d+")){					YwUserRoom userRoom = ywUserRoomService.getYwUserRoomById(Integer.valueOf(entity.getRoomId()));					if(userRoom != null){						entity.setRoomId(userRoom.getId());					}				}else{					return new ArrayList<LanshaLiveHistory>();				}			}		}		return lanshaLiveHistoryDao.getLanshaLiveHistoryPage(entity, startTime, endTime, page);	}	@Override	public LanshaLiveHistory getLanshaLiveHistoryByRoomId(String roomId) {		return lanshaLiveHistoryDao.getLanshaLiveHistoryByRoomId(roomId);	}	@Override	public List<Map<String, Object>> listMapLiveHistoryReport(LanshaLiveHistory liveHistory, Date startTime, Date endTime) {		return lanshaLiveHistoryDao.listMapLiveHistoryReport(liveHistory, startTime, endTime);	}	@Override	public LanshaLiveHistory getLanshaLiveHistoryByRoomId(String roomId,			int index) {		return lanshaLiveHistoryDao.getLanshaLiveHistoryByRoomId(roomId, index);	}    @Override    public Map<String, Integer> listMapLiveHistory(Date startTime, Date endTime) {        return lanshaLiveHistoryDao.getCount(startTime,endTime);    }    @Override    public List<LanshaLiveHistory> getLanshaLiveHistoryForPage(LanshaLiveHistory entity, Date startTime, Date endTime, PageDto page) {        return lanshaLiveHistoryDao.getLanshaLiveHistoryForPage(entity,startTime,endTime,page);    }}