package com.yaowang.lansha.service.impl;import java.util.ArrayList;import java.util.HashSet;import java.util.List;import java.util.Map;import java.util.Set;import javax.annotation.Resource;import org.apache.commons.collections.CollectionUtils;import org.springframework.stereotype.Service;import com.yaowang.common.dao.PageDto;import com.yaowang.lansha.dao.YwGameHotDao;import com.yaowang.lansha.entity.YwGame;import com.yaowang.lansha.entity.YwGameHot;import com.yaowang.lansha.service.YwGameHotService;import com.yaowang.lansha.service.YwGameService;import com.yaowang.util.cache.DefaultCacheManager;import com.yaowang.util.cache.advice.CacheAnnotation;import com.yaowang.util.cache.advice.CacheClearAnnotation;/** * 热门推荐游戏  * @author  *  */@Service("ywGameHotService")public class YwGameHotServiceImpl extends DefaultCacheManager implements YwGameHotService{	@Resource	private YwGameHotDao ywGameHotDao;	@Resource	private YwGameService ywGameService;		@Override	@CacheClearAnnotation	public YwGameHot save(YwGameHot entity){		return ywGameHotDao.save(entity);	}		@Override	@CacheClearAnnotation	public Integer delete(String[] ids){		return ywGameHotDao.delete(ids);	}		@Override	@CacheClearAnnotation	public Integer update(YwGameHot entity){		return ywGameHotDao.update(entity);	}	@Override	@CacheClearAnnotation	public Integer deleteByGameId(String... gameId) {		return ywGameHotDao.deleteByGameId(gameId);	}	@Override	@CacheClearAnnotation	public Integer updateOrderId(String id, Integer orderId) {		return ywGameHotDao.updateOrderId(id, orderId);	}		@Override	public YwGameHot getYwGameHotById(String id){		return ywGameHotDao.getYwGameHotById(id);	}		@Override	public Map<String, YwGameHot> getYwGameHotMapByIds(String[] ids){		return ywGameHotDao.getYwGameHotMapByIds(ids);	}		@Override	public List<YwGameHot> getYwGameHotList(YwGameHot entity){		return ywGameHotDao.getYwGameHotList(entity);	}		@Override	@CacheAnnotation	public List<YwGameHot> getYwGameHotPage(YwGameHot entity, PageDto page){		return ywGameHotDao.getYwGameHotPage(entity, page);	}	@Override	public YwGameHot getYwGameHotByGameId(String gameId) {		return ywGameHotDao.getYwGameHotByGameId(gameId);	}	@Override	public Map<String, YwGameHot> getYwGameHotMapByGameIds(String[] gameIds) {		return ywGameHotDao.getYwGameHotMapByGameIds(gameIds);	}	@Override	public List<YwGame> setGame(List<YwGameHot> list) {		List<YwGame> games = new ArrayList<YwGame>();		if(CollectionUtils.isEmpty(list)){			return games;		}		Set<String> gameIds = new HashSet<String>();		for(YwGameHot hot : list){			gameIds.add(hot.getGameId());		}				Map<String, YwGame> map = ywGameService.getYwGameMapByIds(gameIds.toArray(new String[]{}));		for(YwGameHot hot : list){			YwGame game = map.get(hot.getGameId());			if(game != null){				hot.setGameName(game.getName());				games.add(game);			}		}		return games;	}	@Override	public List<String> getHotGameIdPage(int limit) {		return ywGameHotDao.getHotGameIdPage(limit);	}    @Override    public List<Map<String, Object>>  getHotGame(int limit) {        return ywGameHotDao.getHotGame(limit);  //To change body of implemented methods use File | Settings | File Templates.    }}